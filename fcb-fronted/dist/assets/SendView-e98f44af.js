import{U as te,C as Xe,c as Je,d as q,u as Ye,e as Qe,f as Ze,g as ve,t as ae,i as ye,b as ge,E as et}from"./el-input-57715696.js";import{g as tt,e as be,c as he,d as _e,f as at,_ as st}from"./config-afba6bec.js";import"./el-tag-d1e4564a.js";import{i as ot,E as lt,a as nt}from"./el-select-644f3545.js";import"./el-popper-41183857.js";import{b as V,ad as ke,G as oe,l as le,ae as ne,s as P,k as Se,c as B,d as x,u as T,o as b,V as E,S as R,A as Ee,af as $e,f as e,J as we,e as h,r as C,U as O,_ as N,n as Re,Z as A,X as D,g as xe,P as Ce,p as Ue,t as rt,x as it,O as Y,i as De,ag as Fe,j as w,m as Q,ah as U,ai as ut,a as F,w as k,a8 as Le,a9 as Be,Y as Pe,W as $,B as S,L as I,aj as dt,ak as ct,al as pt,am as ft,an as mt,ao as vt,ap as yt,aq as gt,ar as Z,q as re,as as bt,at as ht,au as _t,Q as kt,av as St,aw as ie,ax as ue,a7 as se,ay as Et,az as $t,aA as M,ac as Ve}from"./index-d90d9537.js";import{b as wt}from"./_baseClone-768abeb0.js";import"./_commonjsHelpers-de833af9.js";import"./vnode-4ec09a98.js";var Rt=1,xt=4;function de(l){return wt(l,Rt|xt)}const Te=V({size:ke,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),Ct=V({...Te,modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean}),Oe={[te]:l=>oe(l)||le(l)||ne(l),[Xe]:l=>oe(l)||le(l)||ne(l)},ze=Symbol("radioGroupKey"),Ie=(l,i)=>{const a=P(),t=Se(ze,void 0),p=B(()=>!!t),u=B({get(){return p.value?t.modelValue:l.modelValue},set(y){p.value?t.changeEvent(y):i&&i(te,y),a.value.checked=l.modelValue===l.label}}),c=Je(B(()=>t==null?void 0:t.size)),g=q(B(()=>t==null?void 0:t.disabled)),v=P(!1),d=B(()=>g.value||p.value&&u.value!==l.label?-1:0);return{radioRef:a,isGroup:p,radioGroup:t,focus:v,size:c,disabled:g,tabIndex:d,modelValue:u}},Ut=["value","name","disabled"],Dt=x({name:"ElRadio"}),Ft=x({...Dt,props:Ct,emits:Oe,setup(l,{emit:i}){const a=l,t=T("radio"),{radioRef:p,radioGroup:u,focus:c,size:g,disabled:v,modelValue:d}=Ie(a,i);function y(){Re(()=>i("change",d.value))}return(n,s)=>{var r;return b(),E("label",{class:h([e(t).b(),e(t).is("disabled",e(v)),e(t).is("focus",e(c)),e(t).is("bordered",n.border),e(t).is("checked",e(d)===n.label),e(t).m(e(g))])},[R("span",{class:h([e(t).e("input"),e(t).is("disabled",e(v)),e(t).is("checked",e(d)===n.label)])},[Ee(R("input",{ref_key:"radioRef",ref:p,"onUpdate:modelValue":s[0]||(s[0]=o=>we(d)?d.value=o:null),class:h(e(t).e("original")),value:n.label,name:n.name||((r=e(u))==null?void 0:r.name),disabled:e(v),type:"radio",onFocus:s[1]||(s[1]=o=>c.value=!0),onBlur:s[2]||(s[2]=o=>c.value=!1),onChange:y},null,42,Ut),[[$e,e(d)]]),R("span",{class:h(e(t).e("inner"))},null,2)],2),R("span",{class:h(e(t).e("label")),onKeydown:s[3]||(s[3]=O(()=>{},["stop"]))},[C(n.$slots,"default",{},()=>[A(D(n.label),1)])],34)],2)}}});var Lt=N(Ft,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio.vue"]]);const Bt=V({...Te,name:{type:String,default:""}}),Pt=["value","name","disabled"],Vt=x({name:"ElRadioButton"}),Tt=x({...Vt,props:Bt,setup(l){const i=l,a=T("radio"),{radioRef:t,focus:p,size:u,disabled:c,modelValue:g,radioGroup:v}=Ie(i),d=B(()=>({backgroundColor:(v==null?void 0:v.fill)||"",borderColor:(v==null?void 0:v.fill)||"",boxShadow:v!=null&&v.fill?`-1px 0 0 0 ${v.fill}`:"",color:(v==null?void 0:v.textColor)||""}));return(y,n)=>{var s;return b(),E("label",{class:h([e(a).b("button"),e(a).is("active",e(g)===y.label),e(a).is("disabled",e(c)),e(a).is("focus",e(p)),e(a).bm("button",e(u))])},[Ee(R("input",{ref_key:"radioRef",ref:t,"onUpdate:modelValue":n[0]||(n[0]=r=>we(g)?g.value=r:null),class:h(e(a).be("button","original-radio")),value:y.label,type:"radio",name:y.name||((s=e(v))==null?void 0:s.name),disabled:e(c),onFocus:n[1]||(n[1]=r=>p.value=!0),onBlur:n[2]||(n[2]=r=>p.value=!1)},null,42,Pt),[[$e,e(g)]]),R("span",{class:h(e(a).be("button","inner")),style:xe(e(g)===y.label?e(d):{}),onKeydown:n[3]||(n[3]=O(()=>{},["stop"]))},[C(y.$slots,"default",{},()=>[A(D(y.label),1)])],38)],2)}}});var Ne=N(Tt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-button.vue"]]);const Ot=V({id:{type:String,default:void 0},size:ke,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}}),zt=Oe,It=["id","aria-label","aria-labelledby"],Nt=x({name:"ElRadioGroup"}),At=x({...Nt,props:Ot,emits:zt,setup(l,{emit:i}){const a=l,t=T("radio"),p=Ye(),u=P(),{formItem:c}=Qe(),{inputId:g,isLabeledByFormItem:v}=Ze(a,{formItemContext:c}),d=n=>{i(te,n),Re(()=>i("change",n))};Ce(()=>{const n=u.value.querySelectorAll("[type=radio]"),s=n[0];!Array.from(n).some(r=>r.checked)&&s&&(s.tabIndex=0)});const y=B(()=>a.name||p.value);return Ue(ze,rt({...it(a),changeEvent:d,name:y})),Y(()=>a.modelValue,()=>{a.validateEvent&&(c==null||c.validate("change").catch(n=>ve()))}),(n,s)=>(b(),E("div",{id:e(g),ref_key:"radioGroupRef",ref:u,class:h(e(t).b("group")),role:"radiogroup","aria-label":e(v)?void 0:n.label||"radio-group","aria-labelledby":e(v)?e(c).labelId:void 0},[C(n.$slots,"default")],10,It))}});var Ae=N(At,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-group.vue"]]);const jt=De(Lt,{RadioButton:Ne,RadioGroup:Ae}),Gt=Fe(Ae);Fe(Ne);const je=Symbol("uploadContextKey"),qt="ElUpload";class Mt extends Error{constructor(i,a,t,p){super(i),this.name="UploadAjaxError",this.status=a,this.method=t,this.url=p}}function ce(l,i,a){let t;return a.response?t=`${a.response.error||a.response}`:a.responseText?t=`${a.responseText}`:t=`fail to ${i.method} ${l} ${a.status}`,new Mt(t,a.status,i.method,l)}function Kt(l){const i=l.responseText||l.response;if(!i)return i;try{return JSON.parse(i)}catch{return i}}const Ht=l=>{typeof XMLHttpRequest>"u"&&ae(qt,"XMLHttpRequest is undefined");const i=new XMLHttpRequest,a=l.action;i.upload&&i.upload.addEventListener("progress",u=>{const c=u;c.percent=u.total>0?u.loaded/u.total*100:0,l.onProgress(c)});const t=new FormData;if(l.data)for(const[u,c]of Object.entries(l.data))Array.isArray(c)?t.append(u,...c):t.append(u,c);t.append(l.filename,l.file,l.file.name),i.addEventListener("error",()=>{l.onError(ce(a,l,i))}),i.addEventListener("load",()=>{if(i.status<200||i.status>=300)return l.onError(ce(a,l,i));l.onSuccess(Kt(i))}),i.open(l.method,a,!0),l.withCredentials&&"withCredentials"in i&&(i.withCredentials=!0);const p=l.headers||{};if(p instanceof Headers)p.forEach((u,c)=>i.setRequestHeader(c,u));else for(const[u,c]of Object.entries(p))ye(c)||i.setRequestHeader(u,String(c));return i.send(t),i},Ge=["text","picture","picture-card"];let Wt=1;const ee=()=>Date.now()+Wt++,qe=V({action:{type:String,default:"#"},headers:{type:w(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>Q({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:w(Array),default:()=>Q([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Ge,default:"text"},httpRequest:{type:w(Function),default:Ht},disabled:Boolean,limit:Number}),Xt=V({...qe,beforeUpload:{type:w(Function),default:U},beforeRemove:{type:w(Function)},onRemove:{type:w(Function),default:U},onChange:{type:w(Function),default:U},onPreview:{type:w(Function),default:U},onSuccess:{type:w(Function),default:U},onProgress:{type:w(Function),default:U},onError:{type:w(Function),default:U},onExceed:{type:w(Function),default:U}}),Jt=V({files:{type:w(Array),default:()=>Q([])},disabled:{type:Boolean,default:!1},handlePreview:{type:w(Function),default:U},listType:{type:String,values:Ge,default:"text"}}),Yt={remove:l=>!!l},Qt=["onKeydown"],Zt=["src"],ea=["onClick"],ta=["title"],aa=["onClick"],sa=["onClick"],oa=x({name:"ElUploadList"}),la=x({...oa,props:Jt,emits:Yt,setup(l,{emit:i}){const{t:a}=ut(),t=T("upload"),p=T("icon"),u=T("list"),c=q(),g=P(!1),v=d=>{i("remove",d)};return(d,y)=>(b(),F(yt,{tag:"ul",class:h([e(t).b("list"),e(t).bm("list",d.listType),e(t).is("disabled",e(c))]),name:e(u).b()},{default:k(()=>[(b(!0),E(Le,null,Be(d.files,n=>(b(),E("li",{key:n.uid||n.name,class:h([e(t).be("list","item"),e(t).is(n.status),{focusing:g.value}]),tabindex:"0",onKeydown:Pe(s=>!e(c)&&v(n),["delete"]),onFocus:y[0]||(y[0]=s=>g.value=!0),onBlur:y[1]||(y[1]=s=>g.value=!1),onClick:y[2]||(y[2]=s=>g.value=!1)},[C(d.$slots,"default",{file:n},()=>[d.listType==="picture"||n.status!=="uploading"&&d.listType==="picture-card"?(b(),E("img",{key:0,class:h(e(t).be("list","item-thumbnail")),src:n.url,alt:""},null,10,Zt)):$("v-if",!0),n.status==="uploading"||d.listType!=="picture-card"?(b(),E("div",{key:1,class:h(e(t).be("list","item-info"))},[R("a",{class:h(e(t).be("list","item-name")),onClick:O(s=>d.handlePreview(n),["prevent"])},[S(e(I),{class:h(e(p).m("document"))},{default:k(()=>[S(e(dt))]),_:1},8,["class"]),R("span",{class:h(e(t).be("list","item-file-name")),title:n.name},D(n.name),11,ta)],10,ea),n.status==="uploading"?(b(),F(e(tt),{key:0,type:d.listType==="picture-card"?"circle":"line","stroke-width":d.listType==="picture-card"?6:2,percentage:Number(n.percentage),style:xe(d.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):$("v-if",!0)],2)):$("v-if",!0),R("label",{class:h(e(t).be("list","item-status-label"))},[d.listType==="text"?(b(),F(e(I),{key:0,class:h([e(p).m("upload-success"),e(p).m("circle-check")])},{default:k(()=>[S(e(ct))]),_:1},8,["class"])):["picture-card","picture"].includes(d.listType)?(b(),F(e(I),{key:1,class:h([e(p).m("upload-success"),e(p).m("check")])},{default:k(()=>[S(e(pt))]),_:1},8,["class"])):$("v-if",!0)],2),e(c)?$("v-if",!0):(b(),F(e(I),{key:2,class:h(e(p).m("close")),onClick:s=>v(n)},{default:k(()=>[S(e(ft))]),_:2},1032,["class","onClick"])),$(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),$(" This is a bug which needs to be fixed "),$(" TODO: Fix the incorrect navigation interaction "),e(c)?$("v-if",!0):(b(),E("i",{key:3,class:h(e(p).m("close-tip"))},D(e(a)("el.upload.deleteTip")),3)),d.listType==="picture-card"?(b(),E("span",{key:4,class:h(e(t).be("list","item-actions"))},[R("span",{class:h(e(t).be("list","item-preview")),onClick:s=>d.handlePreview(n)},[S(e(I),{class:h(e(p).m("zoom-in"))},{default:k(()=>[S(e(mt))]),_:1},8,["class"])],10,aa),e(c)?$("v-if",!0):(b(),E("span",{key:0,class:h(e(t).be("list","item-delete")),onClick:s=>v(n)},[S(e(I),{class:h(e(p).m("delete"))},{default:k(()=>[S(e(vt))]),_:1},8,["class"])],10,sa))],2)):$("v-if",!0)])],42,Qt))),128)),C(d.$slots,"append")]),_:3},8,["class","name"]))}});var pe=N(la,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const na=V({disabled:{type:Boolean,default:!1}}),ra={file:l=>gt(l)},ia=["onDrop","onDragover"],Me="ElUploadDrag",ua=x({name:Me}),da=x({...ua,props:na,emits:ra,setup(l,{emit:i}){const a=Se(je);a||ae(Me,"usage: <el-upload><el-upload-dragger /></el-upload>");const t=T("upload"),p=P(!1),u=q(),c=v=>{if(u.value)return;p.value=!1,v.stopPropagation();const d=Array.from(v.dataTransfer.files),y=a.accept.value;if(!y){i("file",d);return}const n=d.filter(s=>{const{type:r,name:o}=s,f=o.includes(".")?`.${o.split(".").pop()}`:"",_=r.replace(/\/.*$/,"");return y.split(",").map(m=>m.trim()).filter(m=>m).some(m=>m.startsWith(".")?f===m:/\/\*$/.test(m)?_===m.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(m)?r===m:!1)});i("file",n)},g=()=>{u.value||(p.value=!0)};return(v,d)=>(b(),E("div",{class:h([e(t).b("dragger"),e(t).is("dragover",p.value)]),onDrop:O(c,["prevent"]),onDragover:O(g,["prevent"]),onDragleave:d[0]||(d[0]=O(y=>p.value=!1,["prevent"]))},[C(v.$slots,"default")],42,ia))}});var ca=N(da,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const pa=V({...qe,beforeUpload:{type:w(Function),default:U},onRemove:{type:w(Function),default:U},onStart:{type:w(Function),default:U},onSuccess:{type:w(Function),default:U},onProgress:{type:w(Function),default:U},onError:{type:w(Function),default:U},onExceed:{type:w(Function),default:U}}),fa=["onKeydown"],ma=["name","multiple","accept"],va=x({name:"ElUploadContent",inheritAttrs:!1}),ya=x({...va,props:pa,setup(l,{expose:i}){const a=l,t=T("upload"),p=q(),u=Z({}),c=Z(),g=o=>{if(o.length===0)return;const{autoUpload:f,limit:_,fileList:m,multiple:z,onStart:L,onExceed:K}=a;if(_&&m.length+o.length>_){K(o,m);return}z||(o=o.slice(0,1));for(const H of o){const j=H;j.uid=ee(),L(j),f&&v(j)}},v=async o=>{if(c.value.value="",!a.beforeUpload)return d(o);let f,_={};try{const z=a.data,L=a.beforeUpload(o);_=re(a.data)?de(a.data):a.data,f=await L,re(a.data)&&ot(z,_)&&(_=de(a.data))}catch{f=!1}if(f===!1){a.onRemove(o);return}let m=o;f instanceof Blob&&(f instanceof File?m=f:m=new File([f],o.name,{type:o.type})),d(Object.assign(m,{uid:o.uid}),_)},d=(o,f)=>{const{headers:_,data:m,method:z,withCredentials:L,name:K,action:H,onProgress:j,onSuccess:Ke,onError:He,httpRequest:We}=a,{uid:W}=o,X={headers:_||{},withCredentials:L,file:o,data:f??m,method:z,filename:K,action:H,onProgress:G=>{j(G,o)},onSuccess:G=>{Ke(G,o),delete u.value[W]},onError:G=>{He(G,o),delete u.value[W]}},J=We(X);u.value[W]=J,J instanceof Promise&&J.then(X.onSuccess,X.onError)},y=o=>{const f=o.target.files;f&&g(Array.from(f))},n=()=>{p.value||(c.value.value="",c.value.click())},s=()=>{n()};return i({abort:o=>{bt(u.value).filter(o?([_])=>String(o.uid)===_:()=>!0).forEach(([_,m])=>{m instanceof XMLHttpRequest&&m.abort(),delete u.value[_]})},upload:v}),(o,f)=>(b(),E("div",{class:h([e(t).b(),e(t).m(o.listType),e(t).is("drag",o.drag)]),tabindex:"0",onClick:n,onKeydown:Pe(O(s,["self"]),["enter","space"])},[o.drag?(b(),F(ca,{key:0,disabled:e(p),onFile:g},{default:k(()=>[C(o.$slots,"default")]),_:3},8,["disabled"])):C(o.$slots,"default",{key:1}),R("input",{ref_key:"inputRef",ref:c,class:h(e(t).e("input")),name:o.name,multiple:o.multiple,accept:o.accept,type:"file",onChange:y,onClick:f[0]||(f[0]=O(()=>{},["stop"]))},null,42,ma)],42,fa))}});var fe=N(ya,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const me="ElUpload",ga=l=>{var i;(i=l.url)!=null&&i.startsWith("blob:")&&URL.revokeObjectURL(l.url)},ba=(l,i)=>{const a=ht(l,"fileList",void 0,{passive:!0}),t=s=>a.value.find(r=>r.uid===s.uid);function p(s){var r;(r=i.value)==null||r.abort(s)}function u(s=["ready","uploading","success","fail"]){a.value=a.value.filter(r=>!s.includes(r.status))}const c=(s,r)=>{const o=t(r);o&&(console.error(s),o.status="fail",a.value.splice(a.value.indexOf(o),1),l.onError(s,o,a.value),l.onChange(o,a.value))},g=(s,r)=>{const o=t(r);o&&(l.onProgress(s,o,a.value),o.status="uploading",o.percentage=Math.round(s.percent))},v=(s,r)=>{const o=t(r);o&&(o.status="success",o.response=s,l.onSuccess(s,o,a.value),l.onChange(o,a.value))},d=s=>{ye(s.uid)&&(s.uid=ee());const r={name:s.name,percentage:0,status:"ready",size:s.size,raw:s,uid:s.uid};if(l.listType==="picture-card"||l.listType==="picture")try{r.url=URL.createObjectURL(s)}catch(o){ve(me,o.message),l.onError(o,r,a.value)}a.value=[...a.value,r],l.onChange(r,a.value)},y=async s=>{const r=s instanceof File?t(s):s;r||ae(me,"file to be removed not found");const o=f=>{p(f);const _=a.value;_.splice(_.indexOf(f),1),l.onRemove(f,_),ga(f)};l.beforeRemove?await l.beforeRemove(r,a.value)!==!1&&o(r):o(r)};function n(){a.value.filter(({status:s})=>s==="ready").forEach(({raw:s})=>{var r;return s&&((r=i.value)==null?void 0:r.upload(s))})}return Y(()=>l.listType,s=>{s!=="picture-card"&&s!=="picture"||(a.value=a.value.map(r=>{const{raw:o,url:f}=r;if(!f&&o)try{r.url=URL.createObjectURL(o)}catch(_){l.onError(_,r,a.value)}return r}))}),Y(a,s=>{for(const r of s)r.uid||(r.uid=ee()),r.status||(r.status="success")},{immediate:!0,deep:!0}),{uploadFiles:a,abort:p,clearFiles:u,handleError:c,handleProgress:g,handleStart:d,handleSuccess:v,handleRemove:y,submit:n}},ha=x({name:"ElUpload"}),_a=x({...ha,props:Xt,setup(l,{expose:i}){const a=l,t=_t(),p=q(),u=Z(),{abort:c,submit:g,clearFiles:v,uploadFiles:d,handleStart:y,handleError:n,handleRemove:s,handleSuccess:r,handleProgress:o}=ba(a,u),f=B(()=>a.listType==="picture-card"),_=B(()=>({...a,fileList:d.value,onStart:y,onProgress:o,onSuccess:r,onError:n,onRemove:s}));return kt(()=>{d.value.forEach(({url:m})=>{m!=null&&m.startsWith("blob:")&&URL.revokeObjectURL(m)})}),Ue(je,{accept:St(a,"accept")}),i({abort:c,submit:g,clearFiles:v,handleStart:y,handleRemove:s}),(m,z)=>(b(),E("div",null,[e(f)&&m.showFileList?(b(),F(pe,{key:0,disabled:e(p),"list-type":m.listType,files:e(d),"handle-preview":m.onPreview,onRemove:e(s)},ie({append:k(()=>[S(fe,ue({ref_key:"uploadRef",ref:u},e(_)),{default:k(()=>[e(t).trigger?C(m.$slots,"trigger",{key:0}):$("v-if",!0),!e(t).trigger&&e(t).default?C(m.$slots,"default",{key:1}):$("v-if",!0)]),_:3},16)]),_:2},[m.$slots.file?{name:"default",fn:k(({file:L})=>[C(m.$slots,"file",{file:L})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):$("v-if",!0),!e(f)||e(f)&&!m.showFileList?(b(),F(fe,ue({key:1,ref_key:"uploadRef",ref:u},e(_)),{default:k(()=>[e(t).trigger?C(m.$slots,"trigger",{key:0}):$("v-if",!0),!e(t).trigger&&e(t).default?C(m.$slots,"default",{key:1}):$("v-if",!0)]),_:3},16)):$("v-if",!0),m.$slots.trigger?C(m.$slots,"default",{key:2}):$("v-if",!0),C(m.$slots,"tip"),!e(f)&&m.showFileList?(b(),F(pe,{key:3,disabled:e(p),"list-type":m.listType,files:e(d),"handle-preview":m.onPreview,onRemove:e(s)},ie({_:2},[m.$slots.file?{name:"default",fn:k(({file:L})=>[C(m.$slots,"file",{file:L})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):$("v-if",!0)]))}});var ka=N(_a,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const Sa=De(ka);const Ea={class:"el-upload__text"},$a={class:"el-upload__text",style:{"font-size":"10px"}},wa=R("div",{class:"el-upload__tip"},null,-1),Ra=x({__name:"UploadFile",props:{shareData:{type:Object,default:()=>({expire_value:1,expire_style:"day"})}},setup(l){const i=l,{config:a}=be(),{t}=se(),p=he(),u=_e(),c=P([]),g=P(null),v=n=>{u.addShareData({name:n.name,text:"",status:n.status,percentage:0,size:n.size,type:n.raw.type,uid:n.uid})},d=n=>{p.showFileBox=!0;const s=new FormData;if(n.file.size>a.uploadSize){u.shareData.forEach(r=>{r.uid===n.file.uid&&(M.error(t("msg.fileOverSize")),r.status="fail",r.code=t("msg.fileOverSize"),u.save())});return}s.append("file",n.file),s.append("expire_value",i.shareData.expireValue),s.append("expire_style",i.shareData.expireStyle),Ve({url:"share/file/",method:"post",data:s,onUploadProgress:r=>{const o=Math.round(r.loaded*100/r.total)||0;u.shareData.forEach(f=>{f.uid===n.file.uid&&(f.percentage=o,u.save())})}}).then(r=>{const o=r.detail;u.shareData.forEach(f=>{f.uid===n.file.uid&&(f.status="success",f.text=o.text,f.code=o.code,M.success(t("msg.fileUploadSuccess")),u.save())})}).catch(()=>{u.shareData.forEach(r=>{r.uid===n.file.uid&&(r.status="fail",r.code=t("msg.fileUploadFail"),M.error(t("msg.fileUploadFail")),u.save())})})};function y(n){const s=n.clipboardData&&n.clipboardData.items;if(s&&s.length)for(let r=0;r<s.length;r++)if(s[r].kind==="string")s[r].type.match(/^text\/plain/)&&s[r].getAsString(function(o){console.log(o)});else{const o=s[r].getAsFile();if(o){const f=Date.now();o.uid=f,u.addShareData({name:o.name,text:"",status:"ready",percentage:0,size:o.size,type:o.type,uid:f}),d({file:o})}}}return Et(()=>{document.removeEventListener("paste",y)}),Ce(()=>{document.addEventListener("paste",y)}),(n,s)=>{const r=I,o=Sa;return b(),E("div",null,[S(o,{class:"upload-demo",drag:"",multiple:"","show-file-list":!1,ref_key:"uploadBox",ref:g,"file-list":c.value,"onUpdate:fileList":s[0]||(s[0]=f=>c.value=f),"on-change":v,"http-request":d},{tip:k(()=>[wa]),default:k(()=>[S(r,{class:"el-icon--upload"},{default:k(()=>[S(e($t))]),_:1}),R("div",Ea,[A(D(e(t)("send.prompt1")),1),R("em",null,D(e(t)("send.clickUpload")),1)]),R("div",$a,D(e(t)("send.prompt2")),1)]),_:1},8,["file-list"])])}}});const xa={style:{position:"relative"}},Ca=x({__name:"UploadText",props:{shareData:{type:Object,default:()=>({expire_value:1,expire_style:"day"})}},setup(l){const i=l,a=P(""),{t}=se(),p=he(),u=_e(),c=()=>{if(a.value==="")M.warning(t("send.prompt3"));else{const g=new FormData;g.append("text",a.value),g.append("expire_value",i.shareData.expireValue),g.append("expire_style",i.shareData.expireStyle),Ve({url:"share/text/",method:"post",data:g}).then(v=>{const d=v.detail;p.showFileBox=!0,u.addShareData({name:t("send.textShare"),text:d.text,code:d.code,status:"success",percentage:100,size:a.value.length,type:"text",uid:Date.now()})})}};return(g,v)=>{const d=ge,y=et;return b(),E("div",xa,[S(d,{placeholder:e(t)("send.prompt3"),modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=n=>a.value=n),type:"textarea",rows:9,"input-style":{"border-radius":"20px",border:"1px dashed var(--el-border-color)","box-shadow":"none"}},null,8,["placeholder","modelValue","input-style"]),S(y,{onClick:c,style:{position:"absolute",right:"0",top:"0","border-radius":"0 20px 0 20px",margin:"1px",background:"rgba(255,255,255,0.2)"},size:"large"},{default:k(()=>[A(D(e(t)("send.share")),1)]),_:1})])}}}),Ua={style:{display:"flex",margin:"1rem"}},Da={key:0},Fa={key:1},La={key:2},Ba={key:3},Pa={key:4},Va={style:{margin:"1rem"}},Ma=x({__name:"SendView",setup(l){const{config:i}=be(),{t:a}=se(),t=P({expireValue:1,expireStyle:"day",targetType:"file"});return(p,u)=>{const c=nt,g=lt,v=ge,d=jt,y=Gt,n=at;return b(),E("main",null,[S(n,{class:"card",style:{position:"relative"},"body-style":{padding:"0"}},{default:k(()=>[S(st,{style:{padding:"1rem"}}),R("div",Ua,[R("div",null,[S(v,{modelValue:t.value.expireValue,"onUpdate:modelValue":u[1]||(u[1]=s=>t.value.expireValue=s),style:{width:"200px"},placeholder:e(a)("send.pleaseInputExpireValue")},{prepend:k(()=>[S(g,{modelValue:t.value.expireStyle,"onUpdate:modelValue":u[0]||(u[0]=s=>t.value.expireStyle=s),placeholder:e(a)("send.expireStyle"),style:{width:"75px"}},{default:k(()=>[(b(!0),E(Le,null,Be(e(i).expireStyle,s=>(b(),F(c,{key:s,label:e(a)(`send.expireData.${s}`),value:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),append:k(()=>[t.value.expireStyle=="day"?(b(),E("span",Da,D(e(a)("send.expireValue.day")),1)):t.value.expireStyle=="hour"?(b(),E("span",Fa,D(e(a)("send.expireValue.hour")),1)):t.value.expireStyle=="minute"?(b(),E("span",La,D(e(a)("send.expireValue.minute")),1)):t.value.expireStyle=="forever"?(b(),E("span",Ba,"👌")):t.value.expireStyle=="count"?(b(),E("span",Pa,D(e(a)("send.expireValue.count")),1)):$("",!0)]),_:1},8,["modelValue","placeholder"])]),S(y,{modelValue:t.value.targetType,"onUpdate:modelValue":u[2]||(u[2]=s=>t.value.targetType=s),style:{"margin-left":"1rem"}},{default:k(()=>[S(d,{label:"file"},{default:k(()=>[A(D(e(a)("send.fileType.file")),1)]),_:1}),S(d,{label:"text"},{default:k(()=>[A(D(e(a)("send.fileType.text")),1)]),_:1})]),_:1},8,["modelValue"])]),R("div",Va,[t.value.targetType=="file"?(b(),F(Ra,{key:0,shareData:t.value},null,8,["shareData"])):t.value.targetType=="text"?(b(),F(Ca,{key:1,shareData:t.value},null,8,["shareData"])):$("",!0)])]),_:1})])}}});export{Ma as default};
