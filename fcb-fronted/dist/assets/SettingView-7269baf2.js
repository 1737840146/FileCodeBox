import{h as i,N as p,E as y,j as b}from"./request-94d3fb99.js";import{E as c,a as k}from"./el-form-item-a1d8dde9.js";import"./el-tag-f7ff1e0a.js";import{E as U,a as x}from"./el-select-a6a82696.js";import"./el-popper-3cf523b0.js";import{d as z,g as w,o as _,a as E,w as o,m as e,I as V,D as S,M as h,E as s}from"./index-fcb73ef2.js";import"./_baseClone-f46b4f57.js";const C=s("small",null,"最大文件大小，单位:（bit),1mb=1 * 1024 * 1024",-1),B=s("small",{style:{"margin-left":"0.4rem"}},"关闭之后需要登录后台方可上传",-1),M=s("small",{style:{"margin-left":"0.4rem"}},"更新后需要重启FileCodeBox",-1),N={key:0},I={style:{display:"flex",height:"38px"}},D=s("span",{style:{"margin-right":"0.4rem"}},"每",-1),F=s("span",{style:{width:"200px","margin-left":"0.4rem"}},"分钟",-1),A={style:{display:"flex",height:"38px"}},K=s("span",{style:{width:"3rem","margin-right":"0.4rem"}},"上传",-1),j=s("span",{style:{width:"200px","margin-left":"0.4rem"}},"个文件",-1),q={style:{display:"flex",height:"38px"}},O=s("span",{style:{"margin-right":"0.4rem"}},"每",-1),T=s("span",{style:{width:"200px","margin-left":"0.4rem"}},"分钟",-1),G={style:{display:"flex",height:"38px"}},H=s("span",{style:{width:"3rem","margin-right":"0.4rem"}},"允许",-1),J=s("span",{style:{width:"200px","margin-left":"0.4rem"}},"次错误",-1),ee=z({__name:"SettingView",setup(L){const l=w({name:"",description:"",file_storage:"",admin_token:"",keywords:"",openUpload:1,uploadSize:1,uploadMinute:1,s3_access_key_id:"",background:"",s3_secret_access_key:"",s3_bucket_name:"",s3_endpoint_url:"",uploadCount:1,errorMinute:1,errorCount:1});(()=>{i({url:"/admin/config/get",method:"get"}).then(d=>{l.value=d.detail})})();const g=()=>{i({url:"/admin/config/update",method:"patch",data:l.value}).then(d=>{d.code==200?p.success("保存成功"):p.error(d.message)})};return(d,a)=>{const n=y,u=k,m=U,r=x,f=b,v=c;return _(),E(v,null,{default:o(()=>[e(u,{size:"large",label:"网站名称"},{default:o(()=>[e(n,{modelValue:l.value.name,"onUpdate:modelValue":a[0]||(a[0]=t=>l.value.name=t)},null,8,["modelValue"])]),_:1}),e(u,{size:"large",label:"网站描述"},{default:o(()=>[e(n,{modelValue:l.value.description,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value.description=t)},null,8,["modelValue"])]),_:1}),e(u,{size:"large",label:"关键词",style:{"letter-spacing":"0.3rem"}},{default:o(()=>[e(n,{modelValue:l.value.keywords,"onUpdate:modelValue":a[2]||(a[2]=t=>l.value.keywords=t)},null,8,["modelValue"])]),_:1}),e(u,{size:"large",label:"背景图片"},{default:o(()=>[e(n,{modelValue:l.value.background,"onUpdate:modelValue":a[3]||(a[3]=t=>l.value.background=t)},null,8,["modelValue"])]),_:1}),e(u,{size:"large",label:"后台密码"},{default:o(()=>[e(n,{type:"password",modelValue:l.value.admin_token,"onUpdate:modelValue":a[4]||(a[4]=t=>l.value.admin_token=t)},null,8,["modelValue"])]),_:1}),e(u,{size:"large",label:"文件大小"},{append:o(()=>[V("Bit")]),default:o(()=>[e(n,{type:"number",modelValue:l.value.uploadSize,"onUpdate:modelValue":a[5]||(a[5]=t=>l.value.uploadSize=t)},null,8,["modelValue"]),C]),_:1}),e(u,{size:"large",label:"开启上传"},{default:o(()=>[e(r,{modelValue:l.value.openUpload,"onUpdate:modelValue":a[6]||(a[6]=t=>l.value.openUpload=t)},{default:o(()=>[e(m,{label:"开启游客上传",value:1}),e(m,{label:"关闭游客上传",value:0})]),_:1},8,["modelValue"]),B]),_:1}),e(u,{size:"large",label:"存储引擎"},{default:o(()=>[e(r,{modelValue:l.value.file_storage,"onUpdate:modelValue":a[7]||(a[7]=t=>l.value.file_storage=t)},{default:o(()=>[e(m,{label:"本地存储",value:"local"}),e(m,{label:"S3存储",value:"s3"})]),_:1},8,["modelValue"]),M]),_:1}),l.value.file_storage==="s3"?(_(),S("div",N,[e(u,{size:"large",label:"S3 AccessKeyId"},{default:o(()=>[e(n,{modelValue:l.value.s3_access_key_id,"onUpdate:modelValue":a[8]||(a[8]=t=>l.value.s3_access_key_id=t)},null,8,["modelValue"])]),_:1}),e(u,{size:"large",label:"S3 SecretAccessKey"},{default:o(()=>[e(n,{modelValue:l.value.s3_secret_access_key,"onUpdate:modelValue":a[9]||(a[9]=t=>l.value.s3_secret_access_key=t)},null,8,["modelValue"])]),_:1}),e(u,{size:"large",label:"S3 BucketName"},{default:o(()=>[e(n,{modelValue:l.value.s3_bucket_name,"onUpdate:modelValue":a[10]||(a[10]=t=>l.value.s3_bucket_name=t)},null,8,["modelValue"])]),_:1}),e(u,{size:"large",label:"S3 EndpointUrl"},{default:o(()=>[e(n,{modelValue:l.value.s3_endpoint_url,"onUpdate:modelValue":a[11]||(a[11]=t=>l.value.s3_endpoint_url=t)},null,8,["modelValue"])]),_:1})])):h("",!0),e(u,{size:"large",label:"上传限制"},{default:o(()=>[s("span",I,[D,e(n,{type:"number",modelValue:l.value.uploadMinute,"onUpdate:modelValue":a[12]||(a[12]=t=>l.value.uploadMinute=t)},null,8,["modelValue"]),F]),s("span",A,[K,e(n,{type:"number",modelValue:l.value.uploadCount,"onUpdate:modelValue":a[13]||(a[13]=t=>l.value.uploadCount=t)},null,8,["modelValue"]),j])]),_:1}),e(u,{size:"large",label:"错误限制"},{default:o(()=>[s("span",q,[O,e(n,{type:"number",modelValue:l.value.errorMinute,"onUpdate:modelValue":a[14]||(a[14]=t=>l.value.errorMinute=t)},null,8,["modelValue"]),T]),s("span",G,[H,e(n,{type:"number",modelValue:l.value.errorCount,"onUpdate:modelValue":a[15]||(a[15]=t=>l.value.errorCount=t)},null,8,["modelValue"]),J])]),_:1}),e(u,null,{default:o(()=>[e(f,{onClick:g,type:"primary",style:{margin:"auto"}},{default:o(()=>[V("保存")]),_:1})]),_:1})]),_:1})}}});export{ee as default};
